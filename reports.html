<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Reports Dashboard</title>

<!-- Bootstrap + Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<style>
body { margin:0; font-family:'Segoe UI',sans-serif; background:#f4f6f8; }

/* Sidebar */
.sidebar {
    position: fixed; top:0; left:0; height:100vh; width:70px;
    background: linear-gradient(180deg, #000000ff, #000000ff);
    padding-top:18px; overflow-x:hidden;
    transition:width .3s ease; z-index:1000;
}
.sidebar:hover { width:220px; }
.sidebar a {
    display:flex; align-items:center; gap:12px;
    padding:14px 20px; color:#d1d1d1; text-decoration:none; font-size:15px;
    transition:all .3s;
}
.sidebar a i { font-size:18px; }
.sidebar a:hover, .sidebar .active { background:#ff6b6b; color:#fff; }
.sidebar .nav-text { opacity:0; transition:opacity .2s; white-space:nowrap; }
.sidebar:hover .nav-text { opacity:1; }

/* Topbar */
.topbar{margin-left:70px; transition:.3s; background:#fff; padding:14px 20px; box-shadow:0 2px 10px rgba(0,0,0,.1); display:flex; justify-content:space-between; align-items:center; z-index:900;}
.sidebar:hover ~ .topbar{margin-left:220px;}

/* Content */
.content{margin-left:70px;transition:.3s;padding:20px;}
.sidebar:hover ~ .content{margin-left:220px;}

/* Cards / Table */
.card,.table-container{background:#fff; border-radius:12px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,.05);}
.table td,.table th{vertical-align:middle;}
.btn-add{background:#198754;color:#fff;}
.btn-add:hover{background:#157347;}
.btn-delete{background:#dc3545;color:#fff;}
.btn-delete:hover{background:#b02a37;}

/* Stats cards */
.stat-card{border-radius:12px; padding:20px; color:#fff; margin-bottom:20px;}
.card-blue{background:#457b9d;color:#fff;}
.card-green{background:#2a9d8f;color:#fff;}
.card-red{background:#e63946;color:#fff;}
.card-orange{background:#f4a261;color:#fff;}

/* Charts */
.chart-card canvas{width:100%!important; height:280px!important;}
@media(max-width:576px){.chart-card canvas{height:220px!important;}}
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <a href="#"><i class="bi bi-grid"></i><span class="nav-text">Dashboard</span></a>
    <a href="#"><i class="bi bi-box"></i><span class="nav-text">Inventory</span></a>
    <a href="#"><i class="bi bi-cart"></i><span class="nav-text">Sales</span></a>
    <a href="#"><i class="bi bi-truck"></i><span class="nav-text">Purchases</span></a>
    <a class="active" href="#"><i class="bi bi-file-earmark-text"></i><span class="nav-text">Reports</span></a>
    <a href="#"><i class="bi bi-box-arrow-right"></i><span class="nav-text">Logout</span></a>
</div>

<!-- TOPBAR -->
<div class="topbar">
    <div>
        <h5 class="m-0">Reports Dashboard</h5>
        <small class="text-muted">Overview of Inventory, Sales, and Purchases</small>
    </div>
</div>

<!-- MAIN CONTENT -->
<div class="content">
<div class="container-fluid">

<!-- METRICS -->
<div class="row g-4" id="metricCards">
    <!-- JS will populate cards -->
</div>

<!-- CHARTS -->
<div class="row g-4 mt-4">
    <div class="col-md-6">
        <div class="card chart-card">
            <h6 class="text-center">Inventory Stock Distribution</h6>
            <canvas id="stockChart"></canvas>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card chart-card">
            <h6 class="text-center">Sales Revenue by Product</h6>
            <canvas id="salesChart"></canvas>
        </div>
    </div>
</div>

<div class="row g-4 mt-4">
    <div class="col-md-6">
        <div class="card chart-card">
            <h6 class="text-center">Purchases Cost by Product</h6>
            <canvas id="purchasesChart"></canvas>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card chart-card">
            <h6 class="text-center">Inventory Category Breakdown</h6>
            <canvas id="categoryChart"></canvas>
        </div>
    </div>
</div>

</div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Sample data (replace with your real data)
const inventoryData = [
    {id:"P001", name:"Daun Bawang", category:"Breakfast", stock:50, price:12.5},
    {id:"P002", name:"Ikan Siakap", category:"Lunch", stock:8, price:20.0},
    {id:"P003", name:"Nasi Impit", category:"Event", stock:2, price:30.0},
    {id:"P004", name:"Ayam", category:"Ramadhan - Iftar", stock:20, price:16.99},
    {id:"P005", name:"Coffee Beans", category:"Ramadhan - Moreh", stock:2, price:35.9}

];

const salesData = [
    {product_name:'Daun Bawang', total:250},
    {product_name:'Ikan Siakap', total:90},
    {product_name:'Coffee Beans', total:180}
];

const purchasesData = [
    {product_name:'Daun Bawang', total:150},
    {product_name:'Ikan Siakap', total:70},
    {product_name:'Nasi Impit', total:120},
    {product_name:'Coffee Beans', total:40}
];

// Metrics
const totalProducts = inventoryData.length;
const totalStock = inventoryData.reduce((sum,i)=>sum+i.stock,0);
const lowStockCount = inventoryData.filter(i=>i.stock<5).length;
const totalSales = salesData.reduce((sum,s)=>sum+s.total,0);
const salesCount = salesData.length;
const totalPurchases = purchasesData.reduce((sum,p)=>sum+p.total,0);
const purchasesCount = purchasesData.length;

// Populate metric cards
const metrics = [
    {label:'Total Products', value:totalProducts, color:'card-blue'},
    {label:'Total Stock Units', value:totalStock, color:'card-green'},
    {label:'Low Stock (<5)', value:lowStockCount, color:'card-red'},
    {label:'Total Sales (RM)', value:totalSales.toFixed(2), color:'card-orange'},
    {label:'Sales Count', value:salesCount, color:'card-blue'},
    {label:'Total Purchases (RM)', value:totalPurchases.toFixed(2), color:'card-green'},
    {label:'Purchases Count', value:purchasesCount, color:'card-red'}
];

const metricContainer = document.getElementById('metricCards');
metrics.forEach(m=>{
    const col = document.createElement('div');
    col.className='col-md-3';
    col.innerHTML=`<div class="card ${m.color} text-center"><h6>${m.label}</h6><h2>${m.value}</h2></div>`;
    metricContainer.appendChild(col);
});

// Charts
new Chart(document.getElementById('stockChart'), {
    type:'bar',
    data:{ labels:inventoryData.map(i=>i.name), datasets:[{label:'Stock Units', data:inventoryData.map(i=>i.stock), backgroundColor:'#457b9d'}]},
    options:{responsive:true, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}}}
});

// Sales Revenue
const salesSums = {};
salesData.forEach(s=>salesSums[s.product_name]=(salesSums[s.product_name]||0)+s.total);
new Chart(document.getElementById('salesChart'), {
    type:'bar',
    data:{ labels:Object.keys(salesSums), datasets:[{label:'Revenue (RM)', data:Object.values(salesSums), backgroundColor:'#e63946'}]},
    options:{responsive:true, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}}}
});

// Purchases Cost
const purchaseSums = {};
purchasesData.forEach(p=>purchaseSums[p.product_name]=(purchaseSums[p.product_name]||0)+p.total);
new Chart(document.getElementById('purchasesChart'), {
    type:'bar',
    data:{ labels:Object.keys(purchaseSums), datasets:[{label:'Cost (RM)', data:Object.values(purchaseSums), backgroundColor:'#2a9d8f'}]},
    options:{responsive:true, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}}}
});

// Inventory Category Breakdown
const categoryCounts = {};
inventoryData.forEach(i=>categoryCounts[i.category]=(categoryCounts[i.category]||0)+1);
new Chart(document.getElementById('categoryChart'), {
    type:'pie',
    data:{ labels:Object.keys(categoryCounts), datasets:[{data:Object.values(categoryCounts), backgroundColor:['#e63946','#457b9d','#2a9d8f','#f4a261','#8d99ae']}]}
});
</script>

</body>
</html>
